{"version":3,"sources":["webpack:///src/app/pages/prestador/prestadorCadastro/local-atendimento/local-atendimento.page.html","webpack:///src/app/helpers/handlerError.ts","webpack:///src/app/helpers/toastCustom.ts","webpack:///src/app/pages/prestador/prestadorCadastro/local-atendimento/local-atendimento-routing.module.ts","webpack:///src/app/pages/prestador/prestadorCadastro/local-atendimento/local-atendimento.module.ts","webpack:///src/app/pages/prestador/prestadorCadastro/local-atendimento/local-atendimento.page.scss","webpack:///src/app/pages/prestador/prestadorCadastro/local-atendimento/local-atendimento.page.ts"],"names":["HandlerError","err","toastCtrl","data","message","error","errorToast","ToastCustom","msg","CustomToast","color","duration","create","then","x","present","routes","path","component","LocalAtendimentoPageRoutingModule","imports","forChild","exports","LocalAtendimentoPageModule","declarations","LocalAtendimentoPage","prestadorService","loadingContr","router","modalCtrl","alertController","buscarCEPService","confirmAlert","_cdr","locaisAtendimentos","prestador","formulario","compose","required","showLoader","usuarioId","RecuperaInstancia","recuperaUsuario","RecuperaPrestador","result","locaisAtendimento","hideLoader","handler","localAtendimento","obj","valido","mensagem","cidade","uf","Mensagens","CamposObrigatorios","filter","y","length","item","confirmationAlert","situacaoPrestador","TipoSituacaoPrestador","PrestadorEmEdicao","excluirLocalizacao","ExcluirLocalAtendimento","detectChanges","SucessoToast","navigate","modal","backdropDismiss","onWillDismiss","resultModal","validaAdicionarLocalAtendimento","adicionaLocalAtendimento","AdicionaLocalAtendimento","push","reset","selector","template"],"mappings":";;;;;;;;;;;;;;;;;;;AAAA;AAAe;;;AAAA;;;;;;;;;;;;;;;;ACAf;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;QAEaA,Y;;;;;;;gCAEaC,G,EAAUC,S,EAA4B;AACxD,cAAIC,IAAI,GAAGF,GAAX;AACA,cAAIG,OAAO,GAAGD,IAAI,CAACE,KAAL,GAAaF,IAAI,CAACE,KAAL,CAAWD,OAAxB,GAAkCD,IAAhD;;AAEA,mEAAYG,UAAZ,CAAuBF,OAAvB,EAAgCF,SAAhC;AACH;;;;;;;;;;;;;;;;;;;;;ACPL;AAAA;;;AAAA;AAAA;AAAA;;QAAeK,W;;;;;;;mCAEcC,G,EAAaN,S,EAA2B;AAE/D,eAAKO,WAAL,CAAiBP,SAAjB,EAA4BM,GAA5B,EAAgC,QAAhC,EAAyC,IAAzC;AACD;;;qCAE0BN,S,EAA2B;AAEpD,eAAKO,WAAL,CAAiBP,SAAjB,EAA4B,iCAA5B,EAA8D,SAA9D,EAAwE,IAAxE;AACD;;;oCAEyBA,S,EAA6BE,O,EAAgBM,K,EAAcC,Q,EAAY;AAC/FT,mBAAS,CAACU,MAAV,CAAiB;AACfR,mBAAO,EAAEA,OADM;AAEfO,oBAAQ,EAAEA,QAFK;AAGfD,iBAAK,EAACA;AAHS,WAAjB,EAIGG,IAJH,CAIQ,UAAAC,CAAC,EAAE;AAETA,aAAC,CAACC,OAAF;AACD,WAPD;AAQD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AClBL,QAAMC,MAAM,GAAW,CACrB;AACEC,UAAI,EAAE,EADR;AAEEC,eAAS,EAAE;AAFb,KADqB,CAAvB;;AAWA,QAAaC,iCAAiC;AAAA;AAAA,KAA9C;;AAAaA,qCAAiC,6DAJ7C,+DAAS;AACRC,aAAO,EAAE,CAAC,6DAAaC,QAAb,CAAsBL,MAAtB,CAAD,CADD;AAERM,aAAO,EAAE,CAAC,4DAAD;AAFD,KAAT,CAI6C,GAAjCH,iCAAiC,CAAjC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACMb,QAAaI,0BAA0B;AAAA;AAAA,KAAvC;;AAAaA,8BAA0B,6DAXtC,+DAAS;AACRH,aAAO,EAAE,CACP,4DADO,EAEP,0DAFO,EAGP,kEAHO,EAIP,qFAJO,EAKP,0DALO,EAMP,mGANO,CADD;AASRI,kBAAY,EAAE,CAAC,4EAAD;AATN,KAAT,CAWsC,GAA1BD,0BAA0B,CAA1B;;;;;;;;;;;;;;;;ACtBb;AAAe;;;AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACsBf,QAAaE,oBAAoB;AAK/B,oCAAmBC,gBAAnB,EACSxB,SADT,EAESyB,YAFT,EAGSC,MAHT,EAISC,SAJT,EAKSC,eALT,EAMSC,gBANT,EAOSC,YAPT,EAQUC,IARV,EAQiC;AAAA;;AARd,aAAAP,gBAAA,GAAAA,gBAAA;AACV,aAAAxB,SAAA,GAAAA,SAAA;AACA,aAAAyB,YAAA,GAAAA,YAAA;AACA,aAAAC,MAAA,GAAAA,MAAA;AACA,aAAAC,SAAA,GAAAA,SAAA;AACA,aAAAC,eAAA,GAAAA,eAAA;AACA,aAAAC,gBAAA,GAAAA,gBAAA;AACA,aAAAC,YAAA,GAAAA,YAAA;AACC,aAAAC,IAAA,GAAAA,IAAA;AAXV,aAAAC,kBAAA,GAA4B,EAA5B;AAEA,aAAAC,SAAA,GAAiB,EAAjB;AAaE,aAAKC,UAAL,GAAkB,IAAI,wDAAJ,CAAc;AAC9B,gBAAM,IAAI,0DAAJ,CAAgB,EAAhB,EAAoB,0DAAWC,OAAX,CAAmB,CAC3C,0DAAWC,QADgC,CAAnB,CAApB,CADwB;AAGzB,4BAAkB,IAAI,0DAAJ,CAAgB,EAAhB,EAAoB,0DAAWD,OAAX,CAAmB,CAC5D,0DAAWC,QADiD,CAAnB,CAApB,CAHO;AAO9B,oBAAU,IAAI,0DAAJ,CAAgB,EAAhB,EAAoB,0DAAWD,OAAX,CAAmB,CAC/C,0DAAWC,QADoC,CAAnB,CAApB;AAPoB,SAAd,CAAlB;AAWD;;AA5B8B;AAAA;AAAA,mCA8BpB;AAAA;;AACT,eAAKX,YAAL,CAAkBY,UAAlB;AACA,cAAIC,SAAS,GAAG,sDAAOC,iBAAP,GAA2BC,eAA3B,GAA6CF,SAA7D;AACA,eAAKd,gBAAL,CAAsBiB,iBAAtB,CAAwCH,SAAxC,EACG3B,IADH,CACQ,UAAC+B,MAAD,EAAY;AAChB,iBAAI,CAACT,SAAL,GAAiBS,MAAjB;AACA,iBAAI,CAACV,kBAAL,GAA0BU,MAAM,CAACC,iBAAjC;;AACA,iBAAI,CAAClB,YAAL,CAAkBmB,UAAlB;AACD,WALH,WAKW,UAAA7C,GAAG,EAAI;AACd,sFAAa8C,OAAb,CAAqB9C,GAArB,EAA0B,KAAI,CAACC,SAA/B;;AACA,iBAAI,CAACyB,YAAL,CAAkBmB,UAAlB;AACD,WARH;AAUD;AA3C8B;AAAA;AAAA,wDA6CQE,gBA7CR,EA6C+B;AAE5D,cAAIC,GAAG,GAAG;AAAEC,kBAAM,EAAE,IAAV;AAAgBC,oBAAQ,EAAE;AAA1B,WAAV;;AACA,cAAI,CAACH,gBAAgB,CAACI,MAAlB,IAA4B,CAACJ,gBAAgB,CAACK,EAAlD,EAAsD;AACpDJ,eAAG,CAACC,MAAJ,GAAa,KAAb;AACAD,eAAG,CAACE,QAAJ,GAAe,mEAAUG,SAAV,CAAoBC,kBAAnC;AACA,mBAAON,GAAP;AACD;;AAED,cAAI,KAAKf,kBAAL,IAA2B,KAAKA,kBAAL,CAC5BsB,MAD4B,CACrB,UAAAC,CAAC,EAAI;AAAE,mBAAOA,CAAC,CAACJ,EAAF,IAAQL,gBAAgB,CAACK,EAAzB,IAA+BI,CAAC,CAACL,MAAF,IAAYJ,gBAAgB,CAACI,MAAnE;AAA4E,WAD9D,EACgEM,MADhE,GACyE,CADxG,EAC2G;AACzGT,eAAG,CAACC,MAAJ,GAAa,KAAb;AACAD,eAAG,CAACE,QAAJ,GAAe,yCAAf;AACA,mBAAOF,GAAP;AACD;;AAED,iBAAOA,GAAP;AACD;AA9D8B;AAAA;AAAA,2CAiEZU,IAjEY,EAiEN;AAAA;;AAEvB,eAAK3B,YAAL,CAAkB4B,iBAAlB,CAAoC,KAAK9B,eAAzC,EACE,iDAAiD6B,IAAI,CAACP,MAAtD,GAA+D,KAA/D,GAAuEO,IAAI,CAACN,EAA5E,GAAiF,YADnF,EAEExC,IAFF,CAEO,UAAA+B,MAAM,EAAI;AACf,gBAAIA,MAAJ,EAAY;AACV,kBAAI,MAAI,CAACT,SAAL,CAAe0B,iBAAf,IAAoC,mEAAUC,qBAAV,CAAgCC,iBAAxE,EAA2F;AACzF,oBAAMnB,OAAM,GAAG,MAAI,CAACZ,YAAL,CAAkB4B,iBAAlB,CAAoC,MAAI,CAAC9B,eAAzC,EACb,uGADa,EAEbjB,IAFa,CAER,UAAA+B,MAAM,EAAI;AACf,sBAAIA,MAAJ,EAAY;AACV,0BAAI,CAACoB,kBAAL,CAAwBL,IAAxB;AACD;AACF,iBANc,CAAf;AAOD,eARD,MAQO;AACL,sBAAI,CAACK,kBAAL,CAAwBL,IAAxB;AACD;AACF;AACF,WAhBD;AAiBD;AApF8B;AAAA;AAAA,2CAsFJA,IAtFI,EAsFO;AAAA;;AACpC,eAAKhC,YAAL,CAAkBY,UAAlB;AAEA,eAAKb,gBAAL,CACGuC,uBADH,CAC2B,sDAAOxB,iBAAP,GACtBC,eADsB,GACJF,SAFvB,EAEkCmB,IAFlC,EAGG9C,IAHH,CAGQ,UAAC+B,MAAD,EAAY;AAChB,kBAAI,CAACV,kBAAL,GAA0B,MAAI,CAACA,kBAAL,CAAwBsB,MAAxB,CAA+B,UAAAC,CAAC,EAAI;AAAE,qBAAOA,CAAC,CAACL,MAAF,IAAYO,IAAI,CAACP,MAAjB,IAA2BK,CAAC,CAACJ,EAAF,IAAQM,IAAI,CAACN,EAA/C;AAAmD,aAAzF,CAA1B;;AACA,kBAAI,CAACpB,IAAL,CAAUiC,aAAV;;AAEA,kBAAI,CAACvC,YAAL,CAAkBmB,UAAlB;;AACA,qFAAYqB,YAAZ,CAAyB,MAAI,CAACjE,SAA9B;AACD,WATH,WASW,UAAAD,GAAG,EAAI;AACd,sFAAa8C,OAAb,CAAqB9C,GAArB,EAA0B,MAAI,CAACC,SAA/B;;AACA,kBAAI,CAACyB,YAAL,CAAkBmB,UAAlB;AACD,WAZH;AAaD;AAtG8B;AAAA;AAAA,kDAwGE,CAEhC;AA1G8B;AAAA;AAAA,qCA4GX;AAElB,cAAI,KAAKZ,kBAAL,CAAwBwB,MAAxB,IAAkC,CAAtC,EAAyC;AACvC,sFAAaX,OAAb,CAAqB,sCAArB,EAA6D,KAAK7C,SAAlE;AACA,mBAAO,KAAP;AACD;;AACD,cAAI,KAAKiC,SAAL,CAAe0B,iBAAf,IAAoC,mEAAUC,qBAAV,CAAgCC,iBAAxE,EAA2F;AACzF,iBAAKnC,MAAL,CAAYwC,QAAZ,CAAqB,CAAC,wBAAD,CAArB;AACD,WAFD,MAEO;AACL,iBAAKxC,MAAL,CAAYwC,QAAZ,CAAqB,CAAC,4BAAD,CAArB;AACD;AACF;AAvH8B;AAAA;AAAA,iCA0Hf;AACd,cAAI,KAAKjC,SAAL,CAAe0B,iBAAf,IAAoC,mEAAUC,qBAAV,CAAgCC,iBAAxE,EAA2F;AACzF,iBAAKnC,MAAL,CAAYwC,QAAZ,CAAqB,CAAC,wBAAD,CAArB;AACD,WAFD,MAEO;AAEL,iBAAKxC,MAAL,CAAYwC,QAAZ,CAAqB,CAAC,eAAD,CAArB;AACD;AACF;AAjI8B;AAAA;AAAA,8DAmIc;AAAA;;AAE3C,cAAMC,KAAK,GAAG,KAAKxC,SAAL,CAAejB,MAAf,CAAsB;AAClCM,qBAAS,EAAE,4HADuB;AAElCoD,2BAAe,EAAE;AAFiB,WAAtB,EAGXzD,IAHW,CAGN,UAACwD,KAAD,EAAW;AACjBA,iBAAK,CAACtD,OAAN;AACAsD,iBAAK,CAACE,aAAN,GAAsB1D,IAAtB,CAA2B,UAAA2D,WAAW,EAAI;AACxC,kBAAIA,WAAW,CAACrE,IAAhB,EAAsB;AACpB,oBAAI6C,gBAAgB,GAAG;AAAEK,oBAAE,EAAEmB,WAAW,CAACrE,IAAZ,CAAiBkD,EAAvB;AAA2BD,wBAAM,EAAEoB,WAAW,CAACrE,IAAZ,CAAiBiD;AAApD,iBAAvB;;AACA,oBAAI5C,GAAG,GAAG,MAAI,CAACiE,+BAAL,CAAqCzB,gBAArC,CAAV;;AACA,oBAAI,CAACxC,GAAG,CAAC0C,MAAT,EAAiB;AACf,4FAAaH,OAAb,CAAqBvC,GAAG,CAAC2C,QAAzB,EAAmC,MAAI,CAACjD,SAAxC;AACA,yBAAO,KAAP;AACD;;AACD,oBAAI,MAAI,CAACiC,SAAL,CAAe0B,iBAAf,IAAoC,mEAAUC,qBAAV,CAAgCC,iBAAxE,EAA2F;AACzF,sBAAMnB,MAAM,GAAG,MAAI,CAACZ,YAAL,CAAkB4B,iBAAlB,CAAoC,MAAI,CAAC9B,eAAzC,EACb,uGADa,EAEbjB,IAFa,CAER,UAAA+B,MAAM,EAAI;AACf,wBAAIA,MAAJ,EAAY;AACV,4BAAI,CAAC8B,wBAAL,CAA8B1B,gBAA9B;AACD;AACF,mBANc,CAAf;AAOD,iBARD,MAQO;AACL,wBAAI,CAAC0B,wBAAL,CAA8B1B,gBAA9B;AACD;AACF;AACF,aApBD;AAqBD,WA1Ba,CAAd;AA2BD;AAhK8B;AAAA;AAAA,iDAkKCA,gBAlKD,EAkKwB;AAAA;;AACrD,eAAKrB,YAAL,CAAkBY,UAAlB;AACA,eAAKb,gBAAL,CAAsBiD,wBAAtB,CAA+C3B,gBAA/C,EAAiE,sDAAOP,iBAAP,GAA2BC,eAA3B,GAA6CF,SAA9G,EACG3B,IADH,CACQ,YAAM;AACV,gBAAI,CAAC,MAAI,CAACqB,kBAAV,EAA8B;AAC5B,oBAAI,CAACA,kBAAL,GAA0B,EAA1B;AACD;;AACD,kBAAI,CAACA,kBAAL,CAAwB0C,IAAxB,CAA6B5B,gBAA7B;;AACA,kBAAI,CAACZ,UAAL,CAAgByC,KAAhB;;AACA,kBAAI,CAAClD,YAAL,CAAkBmB,UAAlB;;AACA,qFAAYqB,YAAZ,CAAyB,MAAI,CAACjE,SAA9B;AACD,WATH,WASW,UAAAD,GAAG,EAAI;AACd,sFAAa8C,OAAb,CAAqB9C,GAArB,EAA0B,MAAI,CAACC,SAA/B;;AACA,kBAAI,CAACyB,YAAL,CAAkBmB,UAAlB;AACD,WAZH;AAaD;AAjL8B;;AAAA;AAAA,OAAjC;;;;cAKuC;;cACjB;;cACG;;cACN;;cACG;;cACM;;cACC;;cACJ;;cACP;;;;AAbLrB,wBAAoB,6DALhC,gEAAU;AACTqD,cAAQ,EAAE,uBADD;AAETC,cAAQ,EAAR;AAAA;AAAA,oJAFS;;;;AAAA,KAAV,CAKgC,GAApBtD,oBAAoB,CAApB","file":"pages-prestador-prestadorCadastro-local-atendimento-local-atendimento-module-es5.js","sourcesContent":["export default \"<ion-content fullscreen>\\n  <ion-header class=\\\"ion-no-border\\\">\\n    <ion-toolbar>\\n      <ion-buttons slot=\\\"start\\\">\\n        <ion-menu-button></ion-menu-button>\\n      </ion-buttons>\\n      <ion-title>\\n        Cadastro Prestador\\n      </ion-title>\\n    </ion-toolbar>\\n  </ion-header>\\n\\n  <ion-progress-bar  *ngIf=\\\"prestador.situacaoPrestador == 1\\\" color=\\\"secondary\\\" value=\\\"0.40\\\" buffer=\\\"0.60\\\"></ion-progress-bar>\\n\\n  <ion-card>\\n    <ion-card-header>\\n      <div class=\\\"ion-text-end\\\">\\n        <ion-button color=\\\"primary\\\" (click)=\\\"abreModalSelecionarLocalAtendimento()\\\">\\n          <ion-icon name=\\\"add-outline\\\" style=\\\"margin-right:10px;\\\"></ion-icon> Novo\\n        </ion-button>\\n      </div>\\n      <ion-card-title>Locais de Atendimento</ion-card-title>\\n    </ion-card-header>\\n    <ion-card-content>\\n      <ion-list style=\\\"margin-top: 20px;\\\">\\n        <ion-item *ngFor=\\\"let item of locaisAtendimentos; let i = index\\\" class=\\\"ion-no-border\\\" button detail=\\\"false\\\"\\n          (click)=\\\"excluirButtonClick(item)\\\">\\n          <ion-icon slot=\\\"end\\\" name=\\\"trash-outline\\\" color=\\\"danger\\\"></ion-icon>\\n          <ion-label class=\\\"ion-text-wrap\\\">{{item.cidade}} / {{item.uf}}</ion-label>\\n\\n        </ion-item>\\n      </ion-list>\\n\\n      <div class=\\\"ion-text-end\\\" style=\\\"margin-top: 20px;\\\">\\n        <ion-button color=\\\"medium\\\" type=\\\"button\\\" (click)=\\\"voltar()\\\" style=\\\"margin-right: 20px!important;\\\" size=\\\"4\\\"\\n          clear>\\n          <ion-icon name=\\\"chevron-back-outline\\\" style=\\\"margin-right:10px;\\\"></ion-icon>Voltar\\n        </ion-button>\\n        <ion-button color=\\\"success\\\" type=\\\"button\\\" (click)=\\\"prosseguir()\\\" clear>\\n          <ion-icon name=\\\"checkmark\\\" style=\\\"margin-right:10px;\\\">\\n          </ion-icon>\\n          {{prestador.SituacaoPrestador == 1 ? \\\"Prosseguir\\\" : \\\"Salvar\\\"}}\\n        </ion-button>\\n      </div>\\n    </ion-card-content>\\n  </ion-card>\\n</ion-content>\";","import { ToastCustom } from './toastCustom';\nimport { ToastController } from '@ionic/angular/providers/toast-controller';\nexport class HandlerError {\n\n    public static handler(err: any, toastCtrl: ToastController) {\n        var data = err;\n        let message = data.error ? data.error.message : data;\n        \n        ToastCustom.errorToast(message, toastCtrl);\n    }\n}","import { ToastController } from '@ionic/angular/providers/toast-controller';\n\nexport  class  ToastCustom{\n\n    public static errorToast(msg:string,  toastCtrl : ToastController){\n     \n      this.CustomToast(toastCtrl, msg,\"danger\",4000);\n    }\n\n    public static SucessoToast(toastCtrl : ToastController){\n\n      this.CustomToast(toastCtrl, \"Operação realizada com sucesso.\",\"success\",4000);\n    }\n\n    public static CustomToast(toastCtrl : ToastController, message:string, color:string, duration:any){\n      toastCtrl.create({\n        message: message,\n        duration: duration,\n        color:color\n      }).then(x=>{\n\n        x.present();\n      });\n    }\n}","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { LocalAtendimentoPage } from './local-atendimento.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: LocalAtendimentoPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class LocalAtendimentoPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { LocalAtendimentoPageRoutingModule } from './local-atendimento-routing.module';\n\nimport { LocalAtendimentoPage } from './local-atendimento.page';\nimport { ComponentsModule } from 'src/app/components/components.module';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    ReactiveFormsModule,\n    ComponentsModule,\n    IonicModule,\n    LocalAtendimentoPageRoutingModule\n  ],\n  declarations: [LocalAtendimentoPage]\n})\nexport class LocalAtendimentoPageModule {}\n","export default \"ion-card-content {\\n  padding-left: 0px !important;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3RyYXZpcy9idWlsZC9hbmRyZWZlcnJlaXJhdHJpbmRhZGUvSWdyZWphQXBwL3NyYy9hcHAvcGFnZXMvcHJlc3RhZG9yL3ByZXN0YWRvckNhZGFzdHJvL2xvY2FsLWF0ZW5kaW1lbnRvL2xvY2FsLWF0ZW5kaW1lbnRvLnBhZ2Uuc2NzcyIsInNyYy9hcHAvcGFnZXMvcHJlc3RhZG9yL3ByZXN0YWRvckNhZGFzdHJvL2xvY2FsLWF0ZW5kaW1lbnRvL2xvY2FsLWF0ZW5kaW1lbnRvLnBhZ2Uuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNJLDRCQUFBO0FDQ0oiLCJmaWxlIjoic3JjL2FwcC9wYWdlcy9wcmVzdGFkb3IvcHJlc3RhZG9yQ2FkYXN0cm8vbG9jYWwtYXRlbmRpbWVudG8vbG9jYWwtYXRlbmRpbWVudG8ucGFnZS5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiaW9uLWNhcmQtY29udGVudHtcbiAgICBwYWRkaW5nLWxlZnQ6IDBweCAhaW1wb3J0YW50O1xuICB9XG4gICIsImlvbi1jYXJkLWNvbnRlbnQge1xuICBwYWRkaW5nLWxlZnQ6IDBweCAhaW1wb3J0YW50O1xufSJdfQ== */\";","import { Component, OnInit, ChangeDetectorRef } from '@angular/core';\nimport { ModalCidadePage } from 'src/app/pages/cidade/modal-cidade/modal-cidade.page';\nimport { FormGroup, Validators, FormControl } from '@angular/forms';\nimport { Router } from '@angular/router';\nimport { PrestadorService } from 'src/app/providers/prestador/prestador.service';\nimport { ModalController, ToastController, AlertController } from '@ionic/angular';\nimport { LoadingContr } from 'src/app/helpers/loadingContr';\nimport { ModalUFPage } from 'src/app/pages/UF/modal-uf/modal-uf.page';\nimport { BuscarCEPService } from 'src/app/providers/buscaCEP/buscar-cep.service';\nimport { Config } from 'src/app/config';\nimport { HandlerError } from 'src/app/helpers/handlerError';\nimport { ToastCustom } from 'src/app/helpers/toastCustom';\nimport { Constants } from 'src/app/utils/constants';\nimport { constants } from 'buffer';\nimport { AdicionarLocalAtendimentoPage } from '../adicionar-local-atendimento/adicionar-local-atendimento.page';\nimport { ConfirmAlert } from 'src/app/helpers/confirmAlert';\n\n@Component({\n  selector: 'app-local-atendimento',\n  templateUrl: './local-atendimento.page.html',\n  styleUrls: ['./local-atendimento.page.scss'],\n})\nexport class LocalAtendimentoPage implements OnInit {\n  formulario: FormGroup;\n  locaisAtendimentos: any[] = [];\n  cidades: string[];\n  prestador: any = {};\n  constructor(public prestadorService: PrestadorService,\n    public toastCtrl: ToastController,\n    public loadingContr: LoadingContr,\n    public router: Router,\n    public modalCtrl: ModalController,\n    public alertController: AlertController,\n    public buscarCEPService: BuscarCEPService,\n    public confirmAlert: ConfirmAlert,\n    private _cdr: ChangeDetectorRef\n\n  ) {\n\n    this.formulario = new FormGroup({\n      'uf': new FormControl('', Validators.compose([\n        Validators.required\n      ])), 'ufApresentacao': new FormControl('', Validators.compose([\n        Validators.required\n      ])),\n\n      'cidade': new FormControl('', Validators.compose([\n        Validators.required\n      ]))\n    });\n  }\n\n  ngOnInit() {\n    this.loadingContr.showLoader();\n    let usuarioId = Config.RecuperaInstancia().recuperaUsuario().usuarioId;\n    this.prestadorService.RecuperaPrestador(usuarioId)\n      .then((result) => {\n        this.prestador = result;\n        this.locaisAtendimentos = result.locaisAtendimento;\n        this.loadingContr.hideLoader();\n      }).catch(err => {\n        HandlerError.handler(err, this.toastCtrl);\n        this.loadingContr.hideLoader();\n      });\n\n  }\n\n  public validaAdicionarLocalAtendimento(localAtendimento: any) {\n\n    let obj = { valido: true, mensagem: \"\" };\n    if (!localAtendimento.cidade || !localAtendimento.uf) {\n      obj.valido = false;\n      obj.mensagem = Constants.Mensagens.CamposObrigatorios;\n      return obj;\n    }\n\n    if (this.locaisAtendimentos && this.locaisAtendimentos\n      .filter(y => { return y.uf == localAtendimento.uf && y.cidade == localAtendimento.cidade; }).length > 0) {\n      obj.valido = false;\n      obj.mensagem = \"Local de atendimento já foi adicionado.\";\n      return obj;\n    }\n\n    return obj;\n  }\n\n\n  excluirButtonClick(item) {\n\n    this.confirmAlert.confirmationAlert(this.alertController,\n      'Deseja excluir local de atendimento <strong>' + item.cidade + \" / \" + item.uf + '</strong>?'\n    ).then(result => {\n      if (result) {\n        if (this.prestador.situacaoPrestador != Constants.TipoSituacaoPrestador.PrestadorEmEdicao) {\n          const result = this.confirmAlert.confirmationAlert(this.alertController,\n            'Toda atualização depende de aprovação e o cadastro ficará suspenso temporariamente, deseja continuar?'\n          ).then(result => {\n            if (result) {\n              this.excluirLocalizacao(item);\n            }\n          });\n        } else {\n          this.excluirLocalizacao(item);\n        }\n      }\n    });\n  }\n\n  private excluirLocalizacao(item: any) {\n    this.loadingContr.showLoader();\n\n    this.prestadorService\n      .ExcluirLocalAtendimento(Config.RecuperaInstancia()\n        .recuperaUsuario().usuarioId, item)\n      .then((result) => {\n        this.locaisAtendimentos = this.locaisAtendimentos.filter(y => { return y.cidade != item.cidade || y.uf != item.uf });\n        this._cdr.detectChanges();\n\n        this.loadingContr.hideLoader();\n        ToastCustom.SucessoToast(this.toastCtrl);\n      }).catch(err => {\n        HandlerError.handler(err, this.toastCtrl);\n        this.loadingContr.hideLoader();\n      });\n  }\n\n  public ExcluirLocalAtendimento() {\n\n  }\n\n  public prosseguir() {\n\n    if (this.locaisAtendimentos.length == 0) {\n      HandlerError.handler(\"Favor informar local de atendimento.\", this.toastCtrl);\n      return false;\n    }\n    if (this.prestador.situacaoPrestador != Constants.TipoSituacaoPrestador.PrestadorEmEdicao) {\n      this.router.navigate(['meu-cadastro-prestador']);\n    } else {\n      this.router.navigate(['prestador-cadastro-servico']);\n    }\n  }\n\n\n  public voltar() {\n    if (this.prestador.situacaoPrestador != Constants.TipoSituacaoPrestador.PrestadorEmEdicao) {\n      this.router.navigate(['meu-cadastro-prestador']);\n    } else {\n\n      this.router.navigate(['dados-empresa']);\n    }\n  }\n\n  public abreModalSelecionarLocalAtendimento() {\n\n    const modal = this.modalCtrl.create({\n      component: AdicionarLocalAtendimentoPage,\n      backdropDismiss: false,\n    }).then((modal) => {\n      modal.present();\n      modal.onWillDismiss().then(resultModal => {\n        if (resultModal.data) {\n          let localAtendimento = { uf: resultModal.data.uf, cidade: resultModal.data.cidade };\n          let msg = this.validaAdicionarLocalAtendimento(localAtendimento)\n          if (!msg.valido) {\n            HandlerError.handler(msg.mensagem, this.toastCtrl);\n            return false;\n          }\n          if (this.prestador.situacaoPrestador != Constants.TipoSituacaoPrestador.PrestadorEmEdicao) {\n            const result = this.confirmAlert.confirmationAlert(this.alertController,\n              'Toda atualização depende de aprovação e o cadastro ficará suspenso temporariamente, deseja continuar?'\n            ).then(result => {\n              if (result) {\n                this.adicionaLocalAtendimento(localAtendimento);\n              }\n            });\n          } else {\n            this.adicionaLocalAtendimento(localAtendimento);\n          }\n        }\n      });\n    });\n  }\n\n  public adicionaLocalAtendimento(localAtendimento: any) {\n    this.loadingContr.showLoader();\n    this.prestadorService.AdicionaLocalAtendimento(localAtendimento, Config.RecuperaInstancia().recuperaUsuario().usuarioId)\n      .then(() => {\n        if (!this.locaisAtendimentos) {\n          this.locaisAtendimentos = [];\n        }\n        this.locaisAtendimentos.push(localAtendimento);\n        this.formulario.reset();\n        this.loadingContr.hideLoader();\n        ToastCustom.SucessoToast(this.toastCtrl);\n      }).catch(err => {\n        HandlerError.handler(err, this.toastCtrl);\n        this.loadingContr.hideLoader();\n      });\n  }\n\n}\n"]}