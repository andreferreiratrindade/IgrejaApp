{"version":3,"sources":["webpack:///src/app/pages/prestador/prestadorCadastro/local-atendimento/local-atendimento.page.html","webpack:///src/app/helpers/handlerError.ts","webpack:///src/app/pages/prestador/prestadorCadastro/local-atendimento/local-atendimento-routing.module.ts","webpack:///src/app/pages/prestador/prestadorCadastro/local-atendimento/local-atendimento.module.ts","webpack:///src/app/pages/prestador/prestadorCadastro/local-atendimento/local-atendimento.page.scss","webpack:///src/app/pages/prestador/prestadorCadastro/local-atendimento/local-atendimento.page.ts"],"names":["HandlerError","err","toastCtrl","data","message","error","console","log","errorToast","routes","path","component","LocalAtendimentoPageRoutingModule","imports","forChild","exports","LocalAtendimentoPageModule","declarations","LocalAtendimentoPage","prestadorService","loadingContr","router","modalCtrl","alertController","buscarCEPService","locaisAtendimentos","formulario","compose","required","showLoader","usuarioId","RecuperaInstancia","recuperaUsuario","RecuperaPrestador","then","result","locaisAtendimento","hideLoader","handler","valido","mensagem","obj","value","cidade","uf","Mensagens","CamposObrigatorios","filter","y","length","validacao","validaAdicionarLocalAtendimento","localAtendimento","AdicionaLocalAtendimento","push","reset","SucessoToast","item","create","header","buttons","text","excluirLocalizacao","alert","present","ExcluirLocalAtendimento","situacaoPrestador","TipoSituacaoPrestador","CadastroServicos","AtualizaPrestador","navigate","modal","backdropDismiss","componentProps","UFs","ListagemUF","RecuperaListagem","onWillDismiss","resultModal","controls","setValue","nome","sigla","buscarMunicipiosPorUF","cidades","selector","template"],"mappings":"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","file":"pages-prestador-prestadorCadastro-local-atendimento-local-atendimento-module-es5.js","sourcesContent":["export default \"<ion-header class=\\\"ion-no-border\\\">\\n  <ion-toolbar>\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-menu-button></ion-menu-button>\\n    </ion-buttons>\\n    <ion-title>\\n      Local Atendimento\\n    </ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n\\n\\n<ion-content>\\n\\n  <ion-card>\\n\\n      <form [formGroup]=\\\"formulario\\\" (ngSubmit)=\\\"adicionarLocalAtendimento()\\\">\\n\\n        <ion-item (click)=\\\"abrirModalUF()\\\" detail>\\n          <ion-grid>\\n            <ion-row>\\n              <ion-col size=\\\"12\\\">\\n                <ion-label>UF<ion-text color=\\\"danger\\\">*</ion-text>\\n\\n                </ion-label>\\n              </ion-col>\\n              <ion-col size=\\\"12\\\">\\n\\n                <ion-note color=\\\"primary\\\"> {{formulario.value.ufApresentacao}}</ion-note>\\n              </ion-col>\\n            </ion-row>\\n          </ion-grid>\\n        </ion-item>\\n\\n        <ion-item (click)=\\\"abrirModalCidade()\\\" detail [disabled]=\\\"!formulario.value.uf\\\">\\n          <ion-grid>\\n            <ion-row>\\n              <ion-col size=\\\"12\\\">\\n                <ion-label>Cidade<ion-text color=\\\"danger\\\">*</ion-text>\\n                </ion-label>\\n              </ion-col>\\n              <ion-col size=\\\"12\\\">\\n                <ion-note color=\\\"primary\\\"> {{formulario.value.cidade}}</ion-note>\\n              </ion-col>\\n            </ion-row>\\n          </ion-grid>\\n        </ion-item>\\n\\n        <ion-button class=\\\"primary\\\" type=\\\"submit\\\" expand=\\\"block\\\">Adicionar</ion-button>\\n      </form>\\n   \\n  </ion-card>\\n\\n  <ion-card *ngFor=\\\"let item of locaisAtendimentos; let i = index\\\" class=\\\"ion-no-border\\\">\\n    <ion-card-header>\\n      <ion-card-title>\\n        <h3>{{i+1}}. {{item.cidade}} / {{item.uf}} </h3>\\n      </ion-card-title>\\n    </ion-card-header>\\n    <ion-grid>\\n      <ion-row>\\n        <ion-col size=\\\"4\\\">\\n          <ion-button size=\\\"small\\\" (click)=\\\"excluirButtonClick(item)\\\" color=\\\"danger\\\">Excluir</ion-button>\\n        </ion-col>\\n      </ion-row>\\n    </ion-grid>\\n  </ion-card>\\n</ion-content>\\n\\n<ion-footer>\\n  <ion-toolbar>\\n    <ion-grid>\\n      <ion-row>\\n        <ion-col  class=\\\"ion-align-self-start\\\">\\n          <ion-button  color=\\\"medium\\\" type=\\\"button\\\" (click)=\\\"voltar()\\\">Voltar</ion-button>\\n        </ion-col>\\n        <ion-col class=\\\"ion-align-self-end\\\">\\n          <ion-button  color=\\\"success\\\" type=\\\"button\\\" (click)=\\\"prosseguir()\\\">Prosseguir</ion-button>\\n        </ion-col>\\n      </ion-row>\\n    </ion-grid>\\n  </ion-toolbar>\\n</ion-footer>\";","import { ToastCustom } from './toastCustom';\nimport { ToastController } from '@ionic/angular/providers/toast-controller';\nexport class HandlerError {\n\n    public static handler(err: any, toastCtrl: ToastController) {\n        var data = err;\n        let message = data.error ? data.error.message : data;\n        \n        console.log(message);\n        ToastCustom.errorToast(message, toastCtrl);\n    }\n}","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { LocalAtendimentoPage } from './local-atendimento.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: LocalAtendimentoPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class LocalAtendimentoPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { LocalAtendimentoPageRoutingModule } from './local-atendimento-routing.module';\n\nimport { LocalAtendimentoPage } from './local-atendimento.page';\nimport { ComponentsModule } from 'src/app/components/components.module';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    ReactiveFormsModule,\n    ComponentsModule,\n    IonicModule,\n    LocalAtendimentoPageRoutingModule\n  ],\n  declarations: [LocalAtendimentoPage]\n})\nexport class LocalAtendimentoPageModule {}\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL3BhZ2VzL3ByZXN0YWRvci9wcmVzdGFkb3JDYWRhc3Ryby9sb2NhbC1hdGVuZGltZW50by9sb2NhbC1hdGVuZGltZW50by5wYWdlLnNjc3MifQ== */\";","import { Component, OnInit } from '@angular/core';\nimport { ModalCidadePage } from 'src/app/pages/cidade/modal-cidade/modal-cidade.page';\nimport { FormGroup, Validators, FormControl } from '@angular/forms';\nimport { Router } from '@angular/router';\nimport { PrestadorService } from 'src/app/providers/prestador/prestador.service';\nimport { ModalController, ToastController, AlertController } from '@ionic/angular';\nimport { LoadingContr } from 'src/app/helpers/loadingContr';\nimport { ModalUFPage } from 'src/app/pages/UF/modal-uf/modal-uf.page';\nimport { BuscarCEPService } from 'src/app/providers/buscaCEP/buscar-cep.service';\nimport { Config } from 'src/app/config';\nimport { HandlerError } from 'src/app/helpers/handlerError';\nimport { ToastCustom } from 'src/app/helpers/toastCustom';\nimport { Constants } from 'src/app/utils/constants';\nimport { constants } from 'buffer';\n\n@Component({\n  selector: 'app-local-atendimento',\n  templateUrl: './local-atendimento.page.html',\n  styleUrls: ['./local-atendimento.page.scss'],\n})\nexport class LocalAtendimentoPage implements OnInit {\n  formulario: FormGroup;\n  locaisAtendimentos: any[] = [];\n  cidades: string[];\n  ngZone: any;\n  constructor(public prestadorService: PrestadorService,\n    public toastCtrl: ToastController,\n    public loadingContr: LoadingContr,\n    public router: Router,\n    public modalCtrl: ModalController,\n    public alertController: AlertController,\n    public buscarCEPService: BuscarCEPService\n  ) {\n\n    this.formulario = new FormGroup({\n      'uf': new FormControl('', Validators.compose([\n        Validators.required\n      ])), 'ufApresentacao': new FormControl('', Validators.compose([\n        Validators.required\n      ])),\n\n      'cidade': new FormControl('', Validators.compose([\n        Validators.required\n      ]))\n    });\n  }\n\n  ngOnInit() {\n    this.loadingContr.showLoader();\n    let usuarioId = Config.RecuperaInstancia().recuperaUsuario().usuarioId;\n    this.prestadorService.RecuperaPrestador(usuarioId)\n      .then((result) => {\n        this.locaisAtendimentos = result.locaisAtendimento;\n        this.loadingContr.hideLoader();\n      }).catch(err => {\n        HandlerError.handler(err, this.toastCtrl);\n        this.loadingContr.hideLoader();\n      });\n\n  }\n\n  public validaAdicionarLocalAtendimento() {\n    let valido = true;\n    let mensagem = \"\";\n\n    let obj = { valido: true, mensagem: \"\" };\n    if (!this.formulario.value.cidade || !this.formulario.value.uf) {\n      obj.valido = false;\n      obj.mensagem = Constants.Mensagens.CamposObrigatorios;\n      return obj;\n    }\n\n    if (this.locaisAtendimentos && this.locaisAtendimentos\n      .filter(y => { return y.uf == this.formulario.value.uf && y.cidade == this.formulario.value.cidade; }).length > 0) {\n      obj.valido = false;\n      obj.mensagem = \"Local de atendimento já foi adicionado.\";\n      return obj;\n    }\n\n    return obj;\n  }\n\n  public adicionarLocalAtendimento() {\n    let validacao = this.validaAdicionarLocalAtendimento()\n    if (!validacao.valido) {\n      HandlerError.handler(validacao.mensagem, this.toastCtrl);\n      return false;\n    }\n    let localAtendimento = { uf: this.formulario.value.uf, cidade: this.formulario.value.cidade };\n    this.loadingContr.showLoader();\n\n    this.prestadorService.AdicionaLocalAtendimento(localAtendimento, Config.RecuperaInstancia().recuperaUsuario().usuarioId)\n      .then(() => {\n        if (!this.locaisAtendimentos) {\n          this.locaisAtendimentos = [];\n        }\n        this.locaisAtendimentos.push(localAtendimento);\n        this.formulario.reset();\n        this.loadingContr.hideLoader();\n        ToastCustom.SucessoToast(this.toastCtrl);\n      }).catch(err => {\n        HandlerError.handler(err, this.toastCtrl);\n        this.loadingContr.hideLoader();\n      });\n  }\n\n  async excluirButtonClick(item) {\n    const alert = await this.alertController.create({\n      header: 'Atenção',\n      message: 'Deseja excluir registro?',\n      buttons: [\n        {\n          text: 'Não',\n        }, {\n          text: 'Sim',\n          handler: () => {\n            this.excluirLocalizacao(item)\n          }\n        }\n      ]\n    });\n    await alert.present();\n\n  }\n\n  private excluirLocalizacao(item: any) {\n\n    this.loadingContr.showLoader();\n\n    this.prestadorService\n      .ExcluirLocalAtendimento(Config.RecuperaInstancia()\n        .recuperaUsuario().usuarioId, item)\n      .then((result) => {\n        this.locaisAtendimentos = this.locaisAtendimentos.filter(y => { return y.cidade != item.cidade && y.uf != item.uf });\n        this.loadingContr.hideLoader();\n        ToastCustom.SucessoToast(this.toastCtrl);\n      }).catch(err => {\n        HandlerError.handler(err, this.toastCtrl);\n        this.loadingContr.hideLoader();\n      });\n  }\n\n  public prosseguir() {\n\n    this.loadingContr.showLoader();\n    let obj = { situacaoPrestador: Constants.TipoSituacaoPrestador.CadastroServicos };\n\n    this.prestadorService\n      .AtualizaPrestador(Config.RecuperaInstancia().recuperaUsuario().usuarioId, obj).then(() => {\n\n        this.loadingContr.hideLoader();\n        ToastCustom.SucessoToast(this.toastCtrl);\n\n        this.router.navigate(['prestador-cadastro-servico']);\n\n      }).catch(err => {\n        HandlerError.handler(err, this.toastCtrl);\n        this.loadingContr.hideLoader();\n      });\n  }\n\n  public abrirModalUF() {\n    const modal = this.modalCtrl.create({\n      component: ModalUFPage,\n      backdropDismiss: false,\n      componentProps: { UFs: Constants.ListagemUF.RecuperaListagem() },\n\n    }).then((modal) => {\n      modal.present();\n      modal.onWillDismiss().then(resultModal => {\n        if (resultModal.data) {\n\n          this.formulario.controls[\"ufApresentacao\"].setValue(resultModal.data.nome + \" / \" + resultModal.data.sigla);\n          this.formulario.controls[\"uf\"].setValue(resultModal.data.sigla);\n          this.loadingContr.showLoader();\n          this.buscarCEPService.buscarMunicipiosPorUF(resultModal.data.sigla)\n            .then(result => {\n\n              this.cidades = result;\n              this.loadingContr.hideLoader();\n            }\n            ).catch(err => { this.loadingContr.hideLoader(); });\n        }\n      });\n    });\n  }\n\n  public abrirModalCidade() {\n    const modal = this.modalCtrl.create({\n      component: ModalCidadePage,\n      componentProps: { cidades: this.cidades },\n      backdropDismiss: false,\n    }).then((modal) => {\n      modal.present();\n      modal.onWillDismiss().then(resultModal => {\n        if (resultModal.data) {\n          this.formulario.controls[\"cidade\"].setValue(resultModal.data);\n        }\n      });\n    });\n  }\n\n  public voltar(){\n    this.router.navigate(['dados-empresa']);\n  }\n\n}\n"]}